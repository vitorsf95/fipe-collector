webpackJsonp([1],{"8jsb":function(t,a){},NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("7+uW"),r={name:"Header",props:{msg:String}},n={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"title"},[a("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]},l=s("VU/8")(r,n,!1,null,null,null).exports,c=new e.a,i=s("mtWM"),o=s.n(i),u={name:"Collect",data:function(){return{statusDatabase:!1,statusMarca:!1,statusCarro:!1,statusDetalhe:!1}},methods:{startDatabase:function(t){var a=this;t.target.disabled=!0,o.a.get("/api/migration/table-create").then(function(){a.statusDatabase=!0}).catch(function(a){alert(a),t.target.disabled=!1,c.$emit("collect-stop")})},collect:function(t,a){var s=this;t.target.disabled=!0,c.$emit("collect-start"),o.a.get("/api/collect/"+a).then(function(){"marca"==a?s.statusMarca=!0:"carro"==a?s.statusCarro=!0:"detalhe"==a&&(s.statusDetalhe=!0),c.$emit("collect-stop")}).catch(function(a){alert(a),t.target.disabled=!1,c.$emit("collect-stop")})},copySqlToClipboard:function(){window.open("/api/dumping/dbmysql?startingId=0","_blank")}}},d={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"collect-buttons"}},[s("button",{class:{done:t.statusDatabase},attrs:{disabled:t.statusDatabase},on:{click:function(a){return t.startDatabase(a)}}},[t._v("Start database")]),t._v(" "),s("button",{class:{done:t.statusMarca},attrs:{disabled:!t.statusDatabase},on:{click:function(a){return t.collect(a,"marca")}}},[t._v('Collect "Marca"')]),t._v(" "),s("button",{class:{done:t.statusCarro},attrs:{disabled:!t.statusMarca},on:{click:function(a){return t.collect(a,"carro")}}},[t._v('Collect "Carro"')]),t._v(" "),s("button",{class:{done:t.statusDetalhe},attrs:{disabled:!t.statusCarro},on:{click:function(a){return t.collect(a,"detalhe")}}},[t._v('Collect "Detalhe"')]),t._v(" "),s("button",{attrs:{disabled:!t.statusCarro},on:{click:function(a){return t.copySqlToClipboard()}}},[t._v("Copy SQL to clipboard")]),t._v(" "),s("br"),s("br"),s("hr")])},staticRenderFns:[]};var h={name:"Status",data:function(){return{statusCarWidth:"80",statusCarDetail:"30",showStatus:!1,isCollecting:!1,statusGeralMarca:100,statusGeralCarro:0,statusGeralDetalhe:0,statusMarca:[]}},methods:{updateStatus:function(){if(0==this.isCollecting){this.isCollecting=!0,this.setStatus();var t=setInterval(function(){this.setStatus(),0==this.isCollecting&&clearInterval(t)}.bind(this),2e3)}},setStatus:function(){var t=this;console.log("updating status"),o.a.get("/api/status/collect").then(function(a){t.statusGeralCarro=a.data.data.geral.carro,t.statusGeralDetalhe=a.data.data.geral.detalhe,t.statusMarca=a.data.data.marca}).catch(function(t){console.log(t)})}},created:function(){c.$on("collect-start",function(){console.log("collect start"),this.updateStatus(),this.showStatus=!0}.bind(this)),c.$on("collect-stop",function(){console.log("collect stop"),this.isCollecting=!1}.bind(this))}},v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return t.showStatus?s("div",{attrs:{id:"status"}},[s("h3",[t._v("STATUS")]),t._v(" "),s("table",[s("tbody",[s("tr",{staticClass:"general"},[t._m(0),t._v(" "),s("td",{staticClass:"status"},[s("div",[s("div",{staticClass:"status-brand",style:{width:t.statusGeralMarca+"%"}},[s("span",[t._v(t._s(t.statusGeralMarca)+"% marca")])]),t._v(" "),s("div",{staticClass:"status-car",style:{width:t.statusGeralCarro+"%"}},[s("span",[t._v(t._s(t.statusGeralCarro)+"% carro")])]),t._v(" "),s("div",{staticClass:"status-detail",style:{width:t.statusGeralDetalhe+"%"}},[s("span",[t._v(t._s(t.statusGeralDetalhe)+"% detalhe")])])])])]),t._v(" "),t._l(t.statusMarca,function(a,e){return s("tr",{key:e},[s("td",{staticClass:"brand"},[t._v(t._s(a.marca_nome))]),t._v(" "),s("td",{staticClass:"status"},[s("div",[s("div",{staticClass:"status-brand",style:{width:"100%"}},[s("span",[t._v(t._s(t.statusGeralMarca)+"% marca")])]),t._v(" "),s("div",{staticClass:"status-car",style:{width:a.status_carro+"%"}},[s("span",[t._v(t._s(a.status_carro)+"% carro")])]),t._v(" "),s("div",{staticClass:"status-detail",style:{width:a.status_detalhe+"%"}},[s("span",[t._v(t._s(a.status_detalhe)+"% detalhe")])])])])])})],2)])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("td",{staticClass:"brand"},[a("b",[this._v("GERAL")])])}]};var _={name:"app",components:{Header:l,Collect:s("VU/8")(u,d,!1,function(t){s("VKy7")},"data-v-2eb7e06c",null).exports,Status:s("VU/8")(h,v,!1,function(t){s("8jsb")},"data-v-67d803c5",null).exports}},p={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("Header",{attrs:{msg:"Fipe Collector"}}),this._v(" "),a("Collect"),this._v(" "),a("Status")],1)},staticRenderFns:[]};var b=s("VU/8")(_,p,!1,function(t){s("NTfH")},null,null).exports;e.a.config.productionTip=!1,new e.a({el:"#app",components:{App:b},template:"<App/>"})},NTfH:function(t,a){},VKy7:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.a4fcc648b33b3789cc51.js.map